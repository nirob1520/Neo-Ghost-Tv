<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live TV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HLS.js -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  
    <!-- PLYR JS -->
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css" />
  
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            margin: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none;    /* Firefox */
            -ms-user-select: none;     /* Internet Explorer/Edge */
            user-select: none;         /* Standard */
        }
        .app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-height: 100vh;
            overflow: hidden;
        }
       
        /* PLAYER AREA - একদম টপ থেকে শুরু */
        .player-area {
            flex-shrink: 0;
            width: 100%;
            background: #000;
            position: relative;
        }
        .video-wrapper {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 aspect ratio */
            background: #000;
        }
        #hls-plyr-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #000;
        }
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }
        .scanlines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent 50%, rgba(0, 255, 85, 0.03) 50%);
            background-size: 100% 4px;
            opacity: 0.3;
        }
        .vignette {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8);
        }
        .loading-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            display: none;
        }
        .spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 255, 85, 0.3);
            border-radius: 50%;
            border-top-color: #00ff55;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
            box-shadow: 0 0 20px rgba(0, 255, 85, 0.5);
        }
        .loading-text {
            color: #00ff55;
            font-size: 16px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 85, 0.7);
            letter-spacing: 2px;
        }
        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; }
        }
        .internet-status {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 25px 35px;
            border-radius: 15px;
            text-align: center;
            z-index: 20;
            display: none;
            border: 2px solid #ff4444;
            max-width: 90%;
            box-shadow: 0 0 30px rgba(255, 68, 68, 0.3);
        }
        .internet-status i {
            font-size: 40px;
            color: #ff4444;
            margin-bottom: 15px;
        }
        .internet-status h3 {
            color: #ff4444;
            margin: 0 0 10px 0;
            font-size: 20px;
        }
        .internet-status p {
            color: #fff;
            margin: 0;
            font-size: 15px;
            opacity: 0.9;
        }
        .plyr-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
        }
        .plyr {
            height: 100%;
            --plyr-color-main: #00ff55;
        }
        .plyr__controls {
            padding: 15px !important;
            background: linear-gradient(transparent, rgba(0,0,0,0.9)) !important;
            backdrop-filter: blur(5px);
        }
        /* CHANNEL AREA */
        .channel-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: linear-gradient(135deg, #111 0%, #1a1a1a 100%);
            border-top: 2px solid #333;
        }
        .channel-header {
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        .channel-header h3 {
            color: #00ff55;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .channel-count {
            background: #00ff55;
            color: #000;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
        }
        .channel-search {
            position: relative;
            width: 200px;
        }
        .channel-search input {
            width: 100%;
            padding: 8px 15px 8px 35px;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #333;
            border-radius: 20px;
            color: #fff;
            font-size: 14px;
        }
        .channel-search i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #00ff55;
        }
        .channels-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        .channels-container::-webkit-scrollbar {
            width: 8px;
        }
        .channels-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }
        .channels-container::-webkit-scrollbar-thumb {
            background: #00ff55;
            border-radius: 4px;
        }
        .channels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }
        .channel-card {
            background: linear-gradient(135deg, #222 0%, #1a1a1a 100%);
            border-radius: 12px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #333;
            position: relative;
            overflow: hidden;
        }
        .channel-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(0, 255, 85, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .channel-card:hover::before {
            opacity: 1;
        }
        .channel-card.active {
            border-color: #00ff55;
            box-shadow: 0 0 50px rgba(0, 250, 5, 5);
            transform: translateY(-2px);
        }
        .channel-card.active::after {
            content: '▶';
            position: absolute;
            top: 4px;
            right: 3px;
            background: #00ff55;
            color: #ff0000;
            width: 20px;
            height: 20px;
            border-radius: 30%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }
        .channel-logo {
            width: 90%;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            border: 2px solid #333;
        }
        .channel-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            padding: 5px;
        }
        .channel-logo .default-logo {
            font-size: 30px;
            color: #00ff55;
            opacity: 0.7;
        }
        .channel-name {
            font-size: 14px;
            font-weight: 600;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 5px;
        }
        .channel-card:hover {
            border-color: #00ff55;
            box-shadow: 0 5px 15px rgba(0, 255, 85, 0.3);
            transform: translateY(-3px);
        }
        .channel-card:hover .channel-name {
            color: #00ff55;
        }
        .no-channels {
            text-align: center;
            padding: 40px 20px;
            color: #888;
            font-size: 16px;
        }
        .no-channels i {
            font-size: 40px;
            margin-bottom: 15px;
            color: #00ff55;
            opacity: 0.5;
        }
        /* Responsive - Desktop (বামে ভিডিও, ডানে চ্যানেল) */
        @media (min-width: 1024px) {
            .app {
                flex-direction: row;
            }
            .player-area {
                width: 75%;
                height: 100vh;
                flex-shrink: 0;
            }
            .video-wrapper {
                padding-top: 0;
                height: 100%;
            }
            .channel-area {
                width: 25%;
                height: 100vh;
                border-top: none;
                border-left: 2px solid #333;
            }
            .channels-grid {
                grid-template-columns: 1fr;
            }
            .channel-card {
                display: flex;
                align-items: center;
                padding: 10px;
            }
            .channel-logo {
                width: 50px;
                height: 50px;
                margin-bottom: 0;
                margin-right: 15px;
                flex-shrink: 0;
            }
            .channel-name {
                text-align: left;
                flex: 1;
            }
        }
        @media (max-width: 768px) {
            .channels-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                gap: 10px;
            }
            .channel-logo {
                height: 60px;
            }
            .channel-name {
                font-size: 12px;
            }
        }
    </style>
</head>
<body oncontextmenu="return false;" onselectstart="return false;" ondragstart="return false;">
    <div class="app">
        <!-- PLAYER AREA - একদম উপর থেকে শুরু -->
        <div class="player-area">
            <div class="video-wrapper">
                <div class="loading-container" id="loadingContainer">
                    <div class="spinner"></div>
                    <div class="loading-text">LOADING<span class="loading-dots"></span></div>
                </div>
                <div class="internet-status" id="internetStatus">
                    <i class="fas fa-wifi-slash"></i>
                    <h3>No Internet Connection</h3>
                    <p>Please check your internet connection</p>
                    <p class="reconnecting">Reconnecting...</p>
                </div>
                <div class="video-overlay">
                    <div class="scanlines"></div>
                    <div class="vignette"></div>
                </div>
                <div class="plyr-container">
                    <video id="hls-plyr-video" playsinline controls></video>
                </div>
            </div>
        </div>
        <!-- CHANNEL AREA -->
        <div class="channel-area">
            <div class="channel-header">
                <h3>
                    <i class="fas fa-list"></i>
                    Channels
                    <span class="channel-count" id="channelCount">0</span>
                </h3>
                <div class="channel-search">
                    <i class="fas fa-search"></i>
                    <input type="text" id="channelSearch" placeholder="Search channels...">
                </div>
            </div>
            <div class="channels-container">
                <div class="channels-grid" id="channelsGrid"></div>
                <div class="no-channels" id="noChannels" style="display: none;">
                    <i class="fas fa-tv"></i>
                    <p>No channels available</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Disable some keyboard shortcuts that could be used for copying/dev tools
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && e.key === 'I') || 
                (e.ctrlKey && e.shiftKey && e.key === 'J') || 
                (e.ctrlKey && e.key === 'u') || 
                (e.ctrlKey && e.key === 'U')) {
                e.preventDefault();
                return false;
            }
        });

        const playlist = "https://raw.githubusercontent.com/Sopnnonil775/Bdix3/refs/heads/main/Bdix.m3u";
        const channelsGrid = document.getElementById("channelsGrid");
        const channelCountElement = document.getElementById("channelCount");
        const channelSearchElement = document.getElementById("channelSearch");
        const loadingContainer = document.getElementById("loadingContainer");
        const internetStatus = document.getElementById("internetStatus");
        const noChannelsElement = document.getElementById("noChannels");
        let channels = [];
        let filteredChannels = [];
        let currentIndex = 0;
        let hlsPlyr = null;
        let hlsInstance = null;
        let isLoading = false;
        let currentVideoUrl = "";
        let isOnline = navigator.onLine;
        let wasPlayingBeforeDisconnect = false;
        const DEFAULT_LOGO = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiByeD0iOCIgeGlsbD0iIzAwMDAwMCIvPgo8cGF0aCBkPSJNMzAgMTVMMTAgMzBMMzAgNDVINTBMMzAgMzBaIiBmaWxsPSIjMDBGRjU1Ii8+CjxjaXJjbGUgY3g9IjMwIiBjeT0iMzAiIHI9IjgiIGZpbGw9IiMwMEZGNTVCIi8+Cjwvc3ZnPgo=';
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        function initializeApp() {
            loadPlaylist();
            setupEventListeners();
            setupConnectionMonitoring();
        }
        function setupEventListeners() {
            channelSearchElement.addEventListener('input', filterChannels);
            document.addEventListener("keydown", handleKeyboardNavigation);
            window.addEventListener('online', handleOnline);
            window.addEventListener('offline', handleOffline);
        }
        function setupConnectionMonitoring() {
            if (!isOnline) {
                showNoInternetMessage();
            }
        }
        async function loadPlaylist() {
            try {
                showLoading();
                const response = await fetch(playlist);
                const text = await response.text();
                parsePlaylist(text);
                buildChannelUI();
                if (channels.length > 0) {
                    playChannel(channels[0].url, channels[0].name);
                }
                hideLoading();
            } catch (error) {
                console.error('Error loading playlist:', error);
                hideLoading();
                showErrorMessage('Failed to load channels');
            }
        }
        function parsePlaylist(text) {
            const lines = text.split("\n");
            let currentChannel = {};
          
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
              
                if (line.startsWith("#EXTINF")) {
                    currentChannel = {
                        name: line.split(",")[1] || "Unknown Channel",
                        logo: extractLogoUrl(line) || DEFAULT_LOGO,
                        group: extractGroup(line) || "General"
                    };
                } else if (line.startsWith("http")) {
                    if (currentChannel.name) {
                        currentChannel.url = line;
                        channels.push({...currentChannel});
                        currentChannel = {};
                    }
                }
            }
          
            filteredChannels = [...channels];
        }
        function extractLogoUrl(line) {
            const match = line.match(/tvg-logo="([^"]+)"/);
            return match ? match[1] : DEFAULT_LOGO;
        }
        function extractGroup(line) {
            const match = line.match(/group-title="([^"]+)"/);
            return match ? match[1] : null;
        }
        function buildChannelUI() {
            channelsGrid.innerHTML = '';
            channelCountElement.textContent = channels.length;
          
            if (channels.length === 0) {
                noChannelsElement.style.display = 'block';
                return;
            }
          
            noChannelsElement.style.display = 'none';
          
            filteredChannels.forEach((channel, index) => {
                const channelCard = document.createElement('div');
                channelCard.className = 'channel-card';
                channelCard.dataset.index = index;
              
                channelCard.innerHTML = `
                    <div class="channel-logo">
                        ${channel.logo === DEFAULT_LOGO ?
                            `<i class="fas fa-tv default-logo"></i>` :
                            `<img src="${channel.logo}" alt="${channel.name}" onerror="this.parentElement.innerHTML='<i class="fas fa-tv default-logo"></i>`
                        }
                    </div>
                    <div class="channel-name">${channel.name}</div>
                `;
              
                channelCard.addEventListener('click', () => {
                    playChannel(channel.url, channel.name);
                    setActiveChannel(channelCard);
                });
              
                channelsGrid.appendChild(channelCard);
              
                if (index === 0) {
                    setActiveChannel(channelCard);
                }
            });
        }
        function filterChannels() {
            const searchTerm = channelSearchElement.value.toLowerCase();
          
            if (!searchTerm) {
                filteredChannels = [...channels];
            } else {
                filteredChannels = channels.filter(channel =>
                    channel.name.toLowerCase().includes(searchTerm) ||
                    (channel.group && channel.group.toLowerCase().includes(searchTerm))
                );
            }
          
            channelsGrid.innerHTML = '';
          
            if (filteredChannels.length === 0) {
                noChannelsElement.style.display = 'block';
            } else {
                noChannelsElement.style.display = 'none';
                filteredChannels.forEach((channel, index) => {
                    const channelCard = document.createElement('div');
                    channelCard.className = 'channel-card';
                    channelCard.dataset.index = index;
                  
                    channelCard.innerHTML = `
                        <div class="channel-logo">
                            ${channel.logo === DEFAULT_LOGO ?
                                `<i class="fas fa-tv default-logo"></i>` :
                                `<img src="${channel.logo}" alt="${channel.name}" onerror="this.parentElement.innerHTML='<i class="fas fa-tv default-logo"></i>'">`
                            }
                        </div>
                        <div class="channel-name">${channel.name}</div>
                    `;
                  
                    channelCard.addEventListener('click', () => {
                        playChannel(channel.url, channel.name);
                        setActiveChannel(channelCard);
                    });
                  
                    channelsGrid.appendChild(channelCard);
                });
            }
        }
        function setActiveChannel(selectedCard) {
            document.querySelectorAll('.channel-card').forEach(card => {
                card.classList.remove('active');
            });
          
            selectedCard.classList.add('active');
            selectedCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        function playChannel(url, name) {
            if (url === currentVideoUrl) return;
          
            currentVideoUrl = url;
            showLoading();
          
            cleanupPlayer();
          
            initializePlayer(url);
        }
        function cleanupPlayer() {
            const videoElement = document.getElementById('hls-plyr-video');
          
            if (videoElement) {
                videoElement.pause();
                videoElement.src = '';
                videoElement.load();
            }
          
            if (hlsInstance) {
                hlsInstance.destroy();
                hlsInstance = null;
            }
          
            if (hlsPlyr) {
                try {
                    hlsPlyr.destroy();
                } catch (e) {
                    console.log("Error destroying Plyr:", e);
                }
                hlsPlyr = null;
            }
        }
        function initializePlayer(url) {
            const videoElement = document.getElementById('hls-plyr-video');
          
            const savedVolume = localStorage.getItem('playerVolume');
            const initialVolume = savedVolume ? parseFloat(savedVolume) : 1.0;
          
            hlsPlyr = new Plyr(videoElement, {
                controls: [
                    'play-large',
                    'play',
                    'progress',
                    'current-time',
                    'duration',
                    'mute',
                    'volume',
                    'settings',
                    'fullscreen'
                ],
                fullscreen: { enabled: true, iosNative: true },
                autoplay: true,
                keyboard: { focused: true, global: true },
                seekTime: 10,
                volume: initialVolume,
                muted: false,
                clickToPlay: true,
                disableContextMenu: true,  // Plyr-এর নিজস্ব context menu ডিজেবল করা হলো (ভিডিওর উপর রাইট ক্লিক)
                storage: { enabled: false },
                quality: { default: 0, options: ['auto'] }
            });
            hlsPlyr.on('volumechange', () => {
                if (hlsPlyr) {
                    localStorage.setItem('playerVolume', hlsPlyr.volume);
                }
            });
            hlsPlyr.on('ready', () => {
                forcePlayVideo();
            });
            hlsPlyr.on('playing', () => {
                hideLoading();
                hideNoInternetMessage();
            });
            if (Hls.isSupported()) {
                hlsInstance = new Hls({
                    enableWorker: true,
                    lowLatencyMode: true,
                    backBufferLength: 90,
                    maxBufferLength: 30,
                    capLevelToPlayerSize: true,
                    debug: false
                });
                hlsInstance.attachMedia(videoElement);
                hlsInstance.loadSource(url);
                hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {
                    setTimeout(() => {
                        forcePlayVideo();
                    }, 500);
                });
                hlsInstance.on(Hls.Events.ERROR, (event, data) => {
                    if (data.fatal) {
                        switch (data.type) {
                            case Hls.ErrorTypes.NETWORK_ERROR:
                                hlsInstance.startLoad();
                                break;
                            case Hls.ErrorTypes.MEDIA_ERROR:
                                hlsInstance.recoverMediaError();
                                break;
                            default:
                                hideLoading();
                                break;
                        }
                    }
                });
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
                videoElement.addEventListener('loadedmetadata', () => {
                    setTimeout(() => {
                        forcePlayVideo();
                    }, 500);
                });
            }
            setTimeout(() => {
                if (isLoading) {
                    hideLoading();
                    forcePlayVideo();
                }
            }, 10000);
        }
        function forcePlayVideo() {
            if (hlsPlyr && !hlsPlyr.playing) {
                const savedVolume = localStorage.getItem('playerVolume');
                const volumeToSet = savedVolume ? parseFloat(savedVolume) : 1.0;
              
                if (hlsPlyr) {
                    hlsPlyr.volume = volumeToSet;
                    hlsPlyr.muted = false;
                }
              
                const playPromise = hlsPlyr.play();
              
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        if (hlsPlyr) {
                            hlsPlyr.muted = true;
                            hlsPlyr.play().then(() => {
                                setTimeout(() => {
                                    if (hlsPlyr) {
                                        hlsPlyr.muted = false;
                                        hlsPlyr.volume = volumeToSet;
                                    }
                                }, 1000);
                            });
                        }
                    });
                }
            }
        }
        function handleKeyboardNavigation(e) {
            if (e.key === "5") {
                e.preventDefault();
                if (hlsPlyr) {
                    if (hlsPlyr.fullscreen.active) {
                        hlsPlyr.exitFullscreen();
                    } else {
                        hlsPlyr.enterFullscreen();
                    }
                }
            }
          
            if (e.key === "Enter") {
                const currentChannel = filteredChannels[currentIndex];
                if (currentChannel) {
                    playChannel(currentChannel.url, currentChannel.name);
                }
            }
          
            if (e.key === "ArrowDown" || e.key === "ArrowUp") {
                e.preventDefault();
              
                if (e.key === "ArrowDown") {
                    currentIndex = (currentIndex + 1) % filteredChannels.length;
                } else {
                    currentIndex = (currentIndex - 1 + filteredChannels.length) % filteredChannels.length;
                }
              
                const channelCards = document.querySelectorAll('.channel-card');
                if (channelCards[currentIndex]) {
                    channelCards[currentIndex].focus();
                    channelCards[currentIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    setActiveChannel(channelCards[currentIndex]);
                  
                    const currentChannel = filteredChannels[currentIndex];
                    if (currentChannel) {
                        playChannel(currentChannel.url, currentChannel.name);
                    }
                }
            }
          
            if (e.key === " " && hlsPlyr) {
                e.preventDefault();
                if (hlsPlyr.playing) {
                    hlsPlyr.pause();
                } else {
                    hlsPlyr.play();
                }
            }
          
            if ((e.key === "ArrowLeft" || e.key === "ArrowRight") && hlsPlyr) {
                const seekTime = e.key === "ArrowLeft" ? -10 : 10;
                hlsPlyr.currentTime += seekTime;
            }
          
            if (e.key === "f" || e.key === "F") {
                e.preventDefault();
                if (hlsPlyr) {
                    if (hlsPlyr.fullscreen.active) {
                        hlsPlyr.exitFullscreen();
                    } else {
                        hlsPlyr.enterFullscreen();
                    }
                }
            }
        }
        function handleOnline() {
            isOnline = true;
            hideNoInternetMessage();
          
            if (wasPlayingBeforeDisconnect && hlsPlyr && !hlsPlyr.playing) {
                setTimeout(() => {
                    forcePlayVideo();
                }, 500);
                wasPlayingBeforeDisconnect = false;
            }
        }
        function handleOffline() {
            isOnline = false;
          
            if (hlsPlyr && hlsPlyr.playing) {
                wasPlayingBeforeDisconnect = true;
            }
          
            showNoInternetMessage();
        }
        function showLoading() {
            isLoading = true;
            loadingContainer.style.display = 'block';
        }
        function hideLoading() {
            isLoading = false;
            loadingContainer.style.display = 'none';
        }
        function showNoInternetMessage() {
            internetStatus.style.display = 'block';
        }
        function hideNoInternetMessage() {
            internetStatus.style.display = 'none';
        }
        function showErrorMessage(message) {
            console.error(message);
        }
    </script>
</body>
</html>
